{"version":3,"file":"idb_helper.js","sourceRoot":"","sources":["../../../../web_worker/keystore/business/idb_helper.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAClD,OAAO,EAAE,iBAAiB,EAAE,MAAM,UAAU,CAAC;AAE7C;IAAA;IAuBA,CAAC;IAlBU,gCAAsB,GAA7B;QACI,IAAI,CAAC,qBAAqB,GAAG,aAAa,CAAC,SAAS,CAAC,SAAS,KAAK,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;IAClH,CAAC;IAEM,2BAAiB,GAAxB,UAAyB,UAAU,EAAE,QAAoB,EAAE,IAAK;QAAhE,iBAaC;QAZG,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,CAAC,CAAC;YAC7B,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC;YACjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YACrE,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG;gBAC3B,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,QAAQ,EAAE,CAAC;YACf,CAAC,CAAC;YACD,IAAI,CAAC,YAAoB,CAAC,SAAS,GAAG;gBACnC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBACzB,OAAO,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC3C,CAAC,CAAC;QACN,CAAC;IACL,CAAC;IAnBM,sBAAY,GAAmB,IAAI,CAAC;IAoB/C,gBAAC;CAAA,AAvBD,IAuBC;SAvBY,SAAS","sourcesContent":["import { QueryExecutor } from '../query_executor';\r\nimport { Connection_Status } from '../enums';\r\n\r\nexport class IdbHelper {\r\n    static _dbConnection;\r\n    static _isDbDeletedByBrowser: boolean;\r\n    static _transaction: IDBTransaction = null;\r\n\r\n    static callDbDroppedByBrowser() {\r\n        this._isDbDeletedByBrowser = QueryExecutor._dbStatus.ConStatus === Connection_Status.Connected ? true : false;\r\n    }\r\n\r\n    static createTransaction(tableNames, callBack: () => void, mode?) {\r\n        if (this._transaction === null) {\r\n            mode = mode ? mode : \"readwrite\";\r\n            this._transaction = this._dbConnection.transaction(tableNames, mode);\r\n            this._transaction.oncomplete = () => {\r\n                this._transaction = null;\r\n                callBack();\r\n            };\r\n            (this._transaction as any).ontimeout = function () {\r\n                this._transaction = null;\r\n                console.error('transaction timed out');\r\n            };\r\n        }\r\n    }\r\n}"]}