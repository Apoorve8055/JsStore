{"version":3,"file":"base_helper.js","sourceRoot":"","sources":["../../../web_worker/business/base_helper.ts"],"names":[],"mappings":"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","sourcesContent":["import { Occurence } from \"../enums\";\nimport { IdbHelper } from \"./idb_helper\";\nimport { Table } from \"../model/table\";\n\nexport class BaseHelper {\n    protected containsNot(whereQry: object) {\n        var status = false,\n            value;\n        Object.keys(whereQry).every((key) => {\n            value = whereQry[key];\n            if (value['!=']) {\n                status = true;\n            }\n            return !status;\n        });\n        return status;\n    }\n\n    protected filterOnOccurence = function (value) {\n        var found = false;\n        value = value.toLowerCase();\n        switch (this._compSymbol) {\n            case Occurence.Any: if (value.indexOf(this._compValue) >= 0) {\n                found = true;\n            } break;\n            case Occurence.First: if (value.indexOf(this._compValue) === 0) {\n                found = true;\n            } break;\n            case Occurence.Last:\n                if (value.lastIndexOf(this._compValue) === value.length - this._compValueLength) {\n                    found = true;\n                } break;\n            default: if (value !== this._compValue) {\n                found = true;\n            }\n        }\n        return found;\n    };\n\n    protected isTableExist(tableName: string) {\n        var is_exist: boolean = false;\n        IdbHelper._activeDb._tables.every((table) => {\n            if (table._name === tableName) {\n                is_exist = true;\n                return false;\n            }\n            return true;\n        });\n        return is_exist;\n    }\n\n    protected getTable(tableName: string) {\n        var current_table: Table;\n        IdbHelper._activeDb._tables.every((table) => {\n            if (table._name === tableName) {\n                current_table = table;\n                return false;\n            }\n            return true;\n        });\n        return current_table;\n    }\n\n    protected getKeyRange(value, op) {\n        var key_range: IDBKeyRange;\n        switch (op) {\n            case '-': key_range = IDBKeyRange.bound(value.Low, value.High, false, false); break;\n            case '>': key_range = IDBKeyRange.lowerBound(value, true); break;\n            case '>=': key_range = IDBKeyRange.lowerBound(value); break;\n            case '<': key_range = IDBKeyRange.upperBound(value, true); break;\n            case '<=': key_range = IDBKeyRange.upperBound(value); break;\n            default: key_range = IDBKeyRange.only(value); break;\n        }\n        return key_range;\n    }\n\n    protected getPrimaryKey(tableName): string {\n        var primary_key: string = (this.getTable(tableName) as Table)._primaryKey;\n        return primary_key ? primary_key : this.getKeyPath(tableName);\n    }\n\n    protected getKeyPath(tableName) {\n        var transaction: IDBTransaction = IdbHelper._dbConnection.transaction([tableName], \"readonly\"),\n            object_store = transaction.objectStore(tableName);\n        return object_store.keyPath as string;\n    }\n\n    protected sortNumberInAsc(values) {\n        values.sort((a, b) => {\n            return a - b;\n        });\n        return values;\n    }\n\n    protected sortNumberInDesc(values) {\n        values.sort((a, b) => {\n            return b - a;\n        });\n        return values;\n    }\n\n    protected sortAlphabetInAsc(values) {\n        values.sort((a, b) => {\n            return a.toLowerCase().localeCompare(b.toLowerCase());\n        });\n        return values;\n    }\n\n    protected sortAlphabetInDesc(values) {\n        values.sort((a, b) => {\n            return b.toLowerCase().localeCompare(a.toLowerCase());\n        });\n        return values;\n    }\n\n    protected getAllCombinationOfWord(word: string, isArray?: boolean) {\n        if (isArray) {\n            var results = [];\n            for (var i = 0, length = word.length; i < length; i++) {\n                results = results.concat(this.getCombination(word[i]));\n            }\n            return results;\n        }\n        else {\n            return this.getCombination(word);\n        }\n    }\n\n    private getCombination(word: string) {\n        var results = [],\n            doAndPushCombination = (subWord: string, chars, index: number) => {\n                if (index === subWord.length) {\n                    results.push(chars.join(\"\"));\n                } else {\n                    var ch = subWord.charAt(index);\n                    chars[index] = ch.toLowerCase();\n                    doAndPushCombination(subWord, chars, index + 1);\n                    chars[index] = ch.toUpperCase();\n                    doAndPushCombination(subWord, chars, index + 1);\n                }\n            };\n        doAndPushCombination(word, [], 0);\n        return results;\n    }\n}"]}