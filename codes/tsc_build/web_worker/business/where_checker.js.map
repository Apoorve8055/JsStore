{"version":3,"file":"where_checker.js","sourceRoot":"","sources":["../../../web_worker/business/where_checker.ts"],"names":[],"mappings":"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","sourcesContent":["import { Occurence } from \"../enums\";\n\n/**\n * For matching the different column value existance for where option\n * \n * @export\n * @class WhereChecker\n */\nexport class WhereChecker {\n  _where: object;\n  _status: boolean;\n\n  constructor(where: object) {\n    this._where = where;\n  }\n\n  check(rowValue) {\n    this._status = true;\n    var column_value;\n    for (var columnName in this._where) {\n      if (this._status) {\n        column_value = this._where[columnName];\n        if (typeof column_value === 'object') {\n          for (var key in column_value) {\n            if (this._status) {\n              switch (key) {\n                case 'In': this.checkIn(columnName, rowValue[columnName]); break;\n                case 'Like': this.checkLike(columnName, rowValue[columnName]); break;\n                case '-':\n                case '>':\n                case '<':\n                case '>=':\n                case '<=':\n                case '!=':\n                  this.checkComparisionOp(columnName, rowValue[columnName], key);\n                  break;\n              }\n            }\n            else {\n              break;\n            }\n          }\n        }\n        else {\n          if (column_value !== rowValue[columnName]) {\n            this._status = false;\n            break;\n          }\n        }\n      }\n      else {\n        break;\n      }\n    }\n    return this._status;\n  }\n\n  private checkIn(column, value) {\n    for (var i = 0, values = this._where[column].In, length = values.length; i < length; i++) {\n      if (values[i] === value) {\n        this._status = true;\n        break;\n      }\n      else {\n        this._status = false;\n      }\n    }\n  }\n\n  private checkLike(column, value) {\n    var values = this._where[column].Like.split('%'),\n      comp_symbol: Occurence,\n      comp_value,\n      symbol_index;\n    if (values[1]) {\n      comp_value = values[1];\n      comp_symbol = values.length > 2 ? Occurence.Any : Occurence.Last;\n    }\n    else {\n      comp_value = values[0];\n      comp_symbol = Occurence.First;\n    }\n    value = value.toLowerCase();\n\n    switch (comp_symbol) {\n      case Occurence.Any:\n        symbol_index = value.indexOf(comp_value.toLowerCase());\n        if (symbol_index < 0) {\n          this._status = false;\n        } break;\n      case Occurence.First:\n        symbol_index = value.indexOf(comp_value.toLowerCase());\n        if (symbol_index > 0 || symbol_index < 0) {\n          this._status = false;\n        } break;\n      default:\n        symbol_index = value.lastIndexOf(comp_value.toLowerCase());\n        if (symbol_index < value.length - comp_value.length) {\n          this._status = false;\n        }\n    }\n  }\n\n  private checkComparisionOp(column, value, symbol) {\n    var compare_value = this._where[column][symbol];\n    switch (symbol) {\n      // greater than\n      case '>': if (value <= compare_value) {\n        this._status = false;\n      } break;\n      // less than\n      case '<': if (value >= compare_value) {\n        this._status = false;\n      } break;\n      // less than equal\n      case '<=': if (value > compare_value) {\n        this._status = false;\n      } break;\n      // greather than equal\n      case '>=': if (value < compare_value) {\n        this._status = false;\n      } break;\n      // between\n      case '-': if (value < compare_value.Low || value > compare_value.High) {\n        this._status = false;\n      } break;\n      // Not equal to\n      case '!=': if (value === compare_value) {\n        this._status = false;\n      } break;\n    }\n  }\n}"]}